# 第三部分 代码与思维合拍

## 第7章 分解

- 代码腐化：在早期，当某个复杂度指标超过一个阈值时，问题就开始出现，当很晚才发现有问题时，这个指标已经变得非常大，可能无可救药了。
- 阈值：一般设置为7.
- 圈复杂度：分支指令和循环指令的个数，反映的是通过某段代码的路径数量。
- 80/24规则：每行80个字符，24行能展示一个函数方法。
- 与思维合拍的代码
  - 六角花：用7个六边形来描述一段代码中发生的事情，体现圈复杂度不应该超过7。
  - 内聚：**以相同速度变化的事物应该聚在一起，以不同速度变化的事物应该分开。**
  - 解析：接收结构化程度较低的输入，产生结构化程度较高的输出。

## 第8章 API设计

- API设计原则：
  - 预设用法：指的是物理实体和人之间的关系，表征事物属性和使用者能力之间的关系，决定了该事物能被使用的方式。
  - 防错设计：API暴露出来的部分向外宣示了它能做什么，没有提供的操作则规定了客户端不应该做的事情。
  - 蒙住名字：用X替换掉方法名，看看方法的签名包含了多少信息。
  - 命令与查询分离：用副作用（事物状态的变化）的方法不会返回数据，返回数据的方法也不应该有副作用。
- 交流的层次：**能用方法名说明的，就不要用注释。能用类型说明的，就不要用方法名。**
  1. 提供以类型信息区分的API来讲解。
  2. 给方法起有用的名字来讲解。
  3. 以好的注释来讲解。
  4. 提供自动化测试的说明性例子来讲解。
  5. 在Git中写出有用的提交说明来讲解。
  6. 编写良好的文档来讲解。

## 第9章 团队合作

- 产生的问题：技术债会随着实践的推移而不断积累。
- Git的使用：注重交流而不是书面表达。
  - 提交说明应当使用祈使句型，且不超过50个字符。
  - 如果要写更多内容，请把第2行留空。尽量在一行内写完。
  - 格式化后行宽不要超过72个字符。
  - 提交说明最适合解释**为什么要做某项修改，或者为什么要这样修改**。
- 持续集成：应当持续将自己的代码与同事正在贡献的代码集成起来。**建议至少每4个小时合并一次。**
- 代码的集体所有权：
  - 巴士系数：需要有多少团队成员被巴士撞到，开发才会停止？提高对环境变化的感知。
  - 结对编程：两名软件开发人员在同一个问题上实时协作的工作方式。
  - 团伙编程：也被称为集中办公。
- `code review`：
  - 时间：每天早上半小时，以及午餐后的半小时。
  - 最重要的标准：*代码是否可读，是否跟思维合拍？*